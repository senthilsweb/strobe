<div class="box widget">		
    <h3>Login</h3>
<form class="form-vertical" id="frmUser" action="#" method="post">
    <div class="alert alert-danger hide" id="divAuthFailed">
                </div>
	<div class="form-group">
		<div class="controls">
			<input type="text" id="inputUsername" name="inputUsername" placeholder="Username" class="span12">
		</div>
	</div>
	<div class="form-group">
		<div class="controls">
			<input type="password" id="inputPassword" name="inputPassword" placeholder="Password" class="span12">
		</div>
	</div>
	<div class="form-group" style="display: none">
		<div class="controls">
			<div class="checkbox">
				<input type="checkbox">Stay signed in
			</div>
		</div>
	</div>
	<div class="form-group">
		<div class="controls">
			<div id="divForgotPassword" class="span6" style="margin-top: 5px;"><a href="#">Forgot Password?</a></div>
			<div class="span6 pull-right">
				<button type="reset" class="btn btn-default" id="btnClear">
				Clear</button>
				&nbsp;
				<button type="submit" class="btn btn-success" id="btnSignIn">
				Sign In
				</button>
			</div>
		</div>
	</div>
</form>
</div>
<div class="row-fluid">&nbsp;</div>
<div class="row-fluid">&nbsp;</div>
<div class="row-fluid">&nbsp;</div>
<div class="row-fluid">&nbsp;</div>
<div class="row-fluid"><button class="btn btn-large btn-block btn-success" type="button">Sign-up</button></div>

<script type="text/javascript">
    console.log("Login");
    function Login() {
        //$("#btnSignIn").click(function(){window.location.href="/dashboard";return false;});
        $("#btnSignIn").click(function () {
            User_Authenticate();
            return false;
        });

        //On click of ForgotPassword link
        $('#divForgotPassword').click(function () {
            debugger;
            $.Topic('ForgotPasswordClick').publish();
        });
    }


    //---------------------------------------------------------------------------------------------------------
    function User_Authenticate() {
        if ($("#inputUsername").val() == "" && $("#inputPassword").val() == "") {
            $("#divAuthFailed").removeClass('hide');
            $("#divAuthFailed").html("Username and password is required.");
        }
        else if ($("#inputUsername").val() == "") {
            $("#divAuthFailed").removeClass('hide');
            $("#divAuthFailed").html("User name is required.");
        }
        else if ($("#inputPassword").val() == "") {
            $("#divAuthFailed").removeClass('hide');
            $("#divAuthFailed").html("Password is required.");
        }
        else {
            $('#btnSignIn').button('loading');
            var request = {}
            request.email = $("#inputUsername").val();
            request.password = $("#inputPassword").val();
            //console.log(JSON.stringify(request))
            setTimeout(function () {
                var promiseLoginDetails = $.ajax({ url: location.origin + '/auth/login', data: request });
                promiseLoginDetails.done(function (data) {
                    window.location.href = "/dashboard";
                    return false;
                });
                promiseLoginDetails.fail(function () {
                    $('#btnSignIn').button('reset')
                    $("#divAuthFailed").show();
                    $("#divAuthFailed").html("The username or password you have entered is incorrect.");
                    console.log("Something went wrong in Authentication")
                });
            }, 100); //End of setTimeout
        }
    }

    addLoadEvent(Login);
</script>