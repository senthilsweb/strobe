<%- console.log(title)%>

    <div id="Employee-details"></div>

<script id="tpl-employee-details" type="text/x-jquery-tmpl">
    <div class="row-fluid">
    <div class="span3">
            <p><i class="fa fa-female fa-5x"></i></p>
        </div>
        <div class="span9">
            <blockquote>
                <p>Paulomi Deb Roy</p>
                <small><cite title="Software Developer">Software Developer</cite></small>
            </blockquote>
        </div>
    </div>
   <div class="row-fluid">
   <table class="table table-striped table-condensed">
            <tr><td>Employee Since</td><td><i class="fa fa-clock-o"></i>&nbsp;3 months ago</td></tr>
            <tr><td>Mobile</td><td><i class="fa fa-mobile-phone"></i>&nbsp;9966220022</td></tr>
            <tr><td>Phone</td><td><i class="fa fa-phone"></i>&nbsp;080-437654325</td></tr>
            <tr><td>Email</td><td><i class="fa fa-envelope"></i>&nbsp;paulomid@vmokshagroup.com</td></tr>
            <tr><td>Status</td><td><i class="ion-thumbsup vm-fa-green"></i>&nbsp;Active</td></tr>
   </table>
    </div>
</script>
<script type="text/javascript">
    EmployeeDetailsLoad = function () {
        //For click handle
        $.Topic("master-list-row-click_view").subscribe(EmployeeDetailsShow);
    }
    addLoadEvent(EmployeeDetailsLoad);

    function EmployeeDetailsShow(args) {
        var data = [];
        $("#tpl-employee-details").tmpl(data).appendTo("#Employee-details");

        //For Progress bar during ajax call      
             $.Topic("LoadingImage").publish({ progress: "show", container: "Employee-details" });  
             setTimeout(function () {
                    var promiseEmployeeDetails = $.ajax({ url: location.origin +  '<%=api%>'+ args.id});
                    promiseEmployeeDetails.done(function (data) { 
                        $("#Employee-details").html(""); 
                            
                        $("#tpl-employee-details").tmpl(data).appendTo("#Employee-details");
                        //hide the progress bar
                        $.Topic("LoadingImage").publish({ progress: "hide", container: "Employee-details" });              
                    });
                    promiseEmployeeDetails.fail(function () { 
                            //hide the progress bar
                            $.Topic("LoadingImage").publish({ progress: "hide", container: "Employee-details" });
                            console.log("Something went wrong in Employee-details")
                    });        
          },100);//End of setTimeout

    }
</script>
